(()=>{"use strict";function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function e(r,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,(void 0,i=function(r,e){if("object"!==t(r)||null===r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}const n=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.grid=Array.from({length:10},(function(){return Array(10).fill(" ")})),this.placedShipsArray=[]}var n,o;return n=t,(o=[{key:"checkPositionAvailability",value:function(t,r,e,n){if("horizontal"===n){if(e+t.length>10)return!1;for(var o=e;o<e+t.length;o++)if(" "!==this.grid[r][o])return!1}if("vertical"===n){if(r+t.length>10)return!1;for(var i=r;i<r+t.length;i++)if(" "!==this.grid[i][e])return!1}return!0}},{key:"receiveAttack",value:function(t,r){this.grid[t][r].ship?(this.grid[t][r].ship.hit(),this.grid[t][r].hitStatus=!0):this.grid[t][r]="miss"}},{key:"reservedSpaceAroundShip",value:function(t,r,e,n){var o=this,i=function(t,r){t>=0&&t<10&&r>=0&&r<10&&" "===o.grid[t][r]&&(o.grid[t][r]="reserved")};if("horizontal"===e)for(var a=r;a<r+n;a++)i(t-1,a),i(t+1,a),i(t,a-1),i(t,a+1),i(t-1,a-1),i(t-1,a+1),i(t+1,a-1),i(t+1,a+1);else if("vertical"===e)for(var l=t;l<t+n;l++)i(l,r-1),i(l,r+1),i(l-1,r),i(l+1,r),i(l-1,r-1),i(l-1,r+1),i(l+1,r-1),i(l+1,r+1)}},{key:"placeShip",value:function(t,r,e,n){if(this.checkPositionAvailability(t,r,e,n)){var o=0;if("horizontal"===n)for(var i=e;i<e+t.length;i++)this.grid[r][i]={ship:t,hitStatus:!1,positionIndex:o},o++;if("vertical"===n)for(var a=r;a<r+t.length;a++)this.grid[a][e]={ship:t,hitStatus:!1,positionIndex:o},o++;this.reservedSpaceAroundShip(r,e,n,t.length),this.placedShipsArray.push(t)}return!0}},{key:"checkIfAllSunk",value:function(){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){u=!0,a=t},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw a}}}}(this.placedShipsArray);try{for(e.s();!(t=e.n()).done;)if(!t.value.isSunk())return!1}catch(t){e.e(t)}finally{e.f()}return!0}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==o(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}const a=function(){function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.hits=0,this.length=r,this.sunk=!1}var r,e;return r=t,(e=[{key:"hit",value:function(){this.hits+=1}},{key:"isSunk",value:function(){if(this.hits===this.length)return!0}}])&&i(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function c(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==l(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}const f=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.board=new n,this.turn=!1,this.unguessedCells=[];for(var r=0;r<10;r++)for(var e=0;e<10;e++)this.unguessedCells.push([r,e])}var r,e;return r=t,(e=[{key:"swapTurn",value:function(t){this.turn=!this.turn,t.turn=!t.turn}},{key:"placeAttack",value:function(t,r,e,n){t.board.receiveAttack(r,e),this.swapTurn(t),n.checkGameOver()}},{key:"placeRandomAttack",value:function(t,r){if(0!==this.unguessedCells.length){var e=Math.floor(Math.random()*this.unguessedCells.length),n=(a=this.unguessedCells[e],l=2,function(t){if(Array.isArray(t))return t}(a)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=i.call(e)).done)&&(l.push(n.value),l.length!==r);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(a,l)||function(t,r){if(t){if("string"==typeof t)return u(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,r):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return this.unguessedCells.splice(e,1),t.board.receiveAttack(o,i),this.swapTurn(t),r.checkGameOver(),[o,i]}var a,l}},{key:"createRandomFleet",value:function(){for(var t=2;t<=6;t++)for(var r=!1;!r;){var e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random()),o=Math.round(Math.random()),i=new a(t),l=0===o?"horizontal":"vertical";this.board.checkPositionAvailability(i,e,n,l)&&(this.board.placeShip(i,e,n,l),r=!0)}}}])&&c(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),t}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function y(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}const h=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t)}var r,e;return r=t,e=[{key:"hitOrMissRender",value:function(t,r,e,n){!0===t.board.grid[r][e].hitStatus&&n.classList.add("hit"),"miss"===t.board.grid[r][e]&&n.classList.add("miss")}},{key:"renderGrid",value:function(){for(var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=document.querySelector(".player-board"),a=0;a<r;a++)for(var l=0;l<r;l++){var u=document.createElement("div");u.classList.add("human-player-x-".concat(a),"human-player-y-".concat(l)),i.appendChild(u)}for(var c=document.querySelector(".opponent-board"),f=function(i){for(var a=function(r){var a=document.createElement("div");a.classList.add("opponent-player-x-".concat(i),"opponent-player-y-".concat(r)),a.addEventListener("click",(function(){if(!a.classList.contains("miss")&&!a.classList.contains("hit")){e.placeAttack(n,i,r,o),t.hitOrMissRender(n,i,r,a);var l=n.placeRandomAttack(e,o),u=document.querySelector(".human-player-x-".concat(l[0],".human-player-y-").concat(l[1]));t.hitOrMissRender(e,l[0],l[1],u)}})),c.appendChild(a)},l=0;l<r;l++)a(l)},s=0;s<r;s++)f(s)}},{key:"renderYourBoard",value:function(t){for(var r=t.board.grid,e=0;e<r.length;e++)for(var n=0;n<r[e].length;n++)r[e][n].ship&&(document.querySelector(".human-player-x-".concat(e,".human-player-y-").concat(n)).style.border="5px solid blue")}}],e&&y(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,r){if("object"!==p(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}var d=new(function(){function t(r,e,n){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.player1=r,this.player2=e,this.ui=n,this.gameOver=!1}var r,e;return r=t,(e=[{key:"startGame",value:function(){this.ui.renderGrid(10,this.player1,this.player2,this),this.player1.createRandomFleet(),this.player2.createRandomFleet(),this.ui.renderYourBoard(this.player1)}},{key:"checkGameOver",value:function(){(this.player1.board.checkIfAllSunk()||this.player2.board.checkIfAllSunk())&&(this.gameOver=!0,this.endGame())}},{key:"endGame",value:function(){alert(this.player1.board.checkIfAllSunk()?"Player 2 Wins!":"Player 1 Wins!")}}])&&v(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),t}())(new f,new f,new h);console.log("START GAME"),d.startGame()})();